- id: 'madelyn_christmas_tree_weekend'
  alias: Lights - Madelyn Christmas Tree Weekend Schedule
  description: 'Turns Madelyn Christmas tree on/off on weekend schedule (Sat-Sun)'
  trigger:
    - platform: time
      at: '08:30:00'
      id: morning_on
    - platform: time
      at: '23:00:00'
      id: night_off
  condition:
    - condition: state
      entity_id: input_boolean.automation_enabled
      state: 'on'
    - condition: time
      weekday:
        - sat
        - sun
    - condition: template
      value_template: >
        {{ not is_state('switch.madelynvanitydesk', 'unavailable') and
           not is_state('switch.madelynvanitydesk', 'unknown') }}
  action:
    - choose:
        - conditions:
            - condition: trigger
              id: morning_on
          sequence:
            - service: switch.turn_on
              target:
                entity_id: switch.madelynvanitydesk
        - conditions:
            - condition: trigger
              id: night_off
          sequence:
            - service: switch.turn_off
              target:
                entity_id: switch.madelynvanitydesk
  mode: single
  max_exceeded: silent
