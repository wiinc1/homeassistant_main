- id: '1695861833625'
  alias: 'Light - Basement Motion Activated'
  description: 'Turns on basement lights when motion is detected after sunset'
  trigger:
    - platform: state
      entity_id: switch.unfinished_basement_motion_detection
      to: 'on'
      from: 'off'
  condition:
    - condition: sun
      after: sunset
    - condition: time
      after: '06:00:00' 
      before: '23:00:00'
    - condition: template
      value_template: >
        {{ not is_state('switch.unfinished_basement_motion_detection', 'unavailable') and
           not is_state('light.basement_familyroom_light', 'unavailable') and
           not is_state('light.basementhallwaylight', 'unavailable') and
           not is_state('light.stormshelter', 'unavailable') }}
  action:
    - service: light.turn_on
      target:
        entity_id:
          - light.basement_familyroom_light
          - light.basementhallwaylight
          - light.stormshelter
      data:
        brightness_pct: 100
        transition: 1
    - delay:
        minutes: 10
    - service: light.turn_off
      target:
        entity_id:
          - light.basement_familyroom_light
          - light.basementhallwaylight
          - light.stormshelter
      data:
        transition: 2
  mode: single