- id: '1695860913280'
  alias: Light - Garage Hallway Motion Turns Light On
  description: 'Turns on garage hallway and laundry room lights when motion is detected'
  trigger:
    - platform: state
      entity_id:
        - binary_sensor.lumi_lumi_sensor_motion_aq2_motion
        - binary_sensor.lumi_lumi_sensor_motion_aq2_motion_2
        - binary_sensor.lumi_lumi_motion_ac02_motion_2
      to: 'on'
      from: 'off'
  condition:
    - condition: template
      value_template: >
        {{ not is_state(trigger.entity_id, 'unavailable') and
           not is_state('light.garage_hallway_2', 'unavailable') and
           not is_state('light.garage_hallway', 'unavailable') and
           not is_state('switch.laundryroom', 'unavailable') }}
  action:
    - choose:
        # 12AM-6AM: 35% brightness
        - conditions:
            - condition: time
              after: '00:00:00'
              before: '06:00:00'
          sequence:
            - service: light.turn_on
              target:
                entity_id:
                  - light.garage_hallway_2
                  - light.garage_hallway
              data:
                brightness_pct: 35
            - service: switch.turn_on
              target:
                entity_id: switch.laundryroom
        # 6AM-sunrise: 70% brightness
        - conditions:
            - condition: time
              after: '06:00:00'
            - condition: sun
              before: sunrise
          sequence:
            - service: light.turn_on
              target:
                entity_id:
                  - light.garage_hallway_2
                  - light.garage_hallway
              data:
                brightness_pct: 70
            - service: switch.turn_on
              target:
                entity_id: switch.laundryroom
        # 8PM-11:59PM: 70% brightness
        - conditions:
            - condition: time
              after: '20:00:00'
              before: '23:59:59'
          sequence:
            - service: light.turn_on
              target:
                entity_id:
                  - light.garage_hallway_2
                  - light.garage_hallway
              data:
                brightness_pct: 70
            - service: switch.turn_on
              target:
                entity_id: switch.laundryroom
        # Default daytime behavior (sunrise-8PM): 100% brightness
        - conditions: []
          sequence:
            - service: light.turn_on
              target:
                entity_id:
                  - light.garage_hallway_2
                  - light.garage_hallway
              data:
                brightness_pct: 100
            - service: switch.turn_on
              target:
                entity_id: switch.laundryroom
  mode: single
  max_exceeded: silent