- id: 'morning_lights_automation'
  alias: Lights - Morning Kitchen
  description: 'Turns on kitchen lights at sunrise and turns them off 4 hours later'
  trigger:
    - platform: sun
      event: sunrise
  condition:
    - condition: state
      entity_id: input_boolean.automation_enabled
      state: 'on'
    - condition: state
      entity_id: light.lights_family_kitchen
      state: 'off'
    - condition: template
      value_template: "{{ not is_state('light.lights_family_kitchen', 'unavailable') and not is_state('light.lights_family_kitchen', 'unknown') }}"
    - condition: state
      entity_id: binary_sensor.vacation_mode_active
      state: 'off'
  action:
    - service: light.turn_on
      target:
        entity_id: light.lights_family_kitchen
    - delay:
        hours: 4
    - service: light.turn_off
      target:
        entity_id: light.lights_family_kitchen
  mode: single
  max_exceeded: silent